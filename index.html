<!DOCTYPE html>
<html lang="be">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>łokar</title>

  <!-- Favicon -->
  <link rel="icon" href="/icons/favicon.svg" type="image/svg+xml">
  <link rel="icon" href="/icons/favicon-32.png" sizes="32x32" type="image/png">
  <link rel="apple-touch-icon" href="/icons/apple-touch-icon.png" sizes="180x180">
  <link rel="manifest" href="/site.webmanifest">
  <meta name="theme-color" content="#111111">

  <link href="https://fonts.googleapis.com/css2?family=Montserrat+Alternates:wght@400;700&display=swap" rel="stylesheet">

  <style>
    /* ВАЖНА: здымае 90% праблем з “вылазіць за экран” */
    *, *::before, *::after{ box-sizing: border-box; }

    body{
      background-color:#111111;
      color:#eeeeee;
      font-family:'Montserrat Alternates', sans-serif;
      margin:0; padding:0;
    }

    .top-bar{
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:20px;
      margin-right:30px;
      font-weight:700;
      font-size:18px;
    }
    .logo{
      color:#A9FF8E;
      font-size:32px;
      font-weight:1000;
      margin:0px 10px 0px 40px;
    }
    nav{ display:flex; gap:30px; margin:0; }
    nav a{ color:#A9FF8E; text-decoration:none; }

    .header-container{ display:flex; justify-content:space-between; align-items:flex-start; padding:0; }
    .header-alignment{
      width:85%;
      max-width:1500px;
      margin:20px auto;
      padding:30px;
      display:flex;
      align-items:center;
      gap:20px;
    }
    .header-left{ flex:1; }
    .main-title{ font-size:48px; color:#A9FF8E; margin:20px 0 10px 0; font-weight:700; }
    .subtitle{ font-size:16px; margin:0; max-width:600px; }
    .header-right{ text-align:center; margin-left:20px; margin-top:30px; }
    .header-right span{ display:block; color:#A9FF8E; font-size:16px; }
    .header-right .game-name{ text-align:center; font-size:18px; color:#eeeeee; margin:10px 0; }

    .game-button{
      background-color:#A9FF8E;
      color:#111111;
      padding:8px 16px;
      text-decoration:none;
      border-radius:7px;
      display:inline-block;
      font-size:14px;
      cursor:pointer;
      user-select:none;
      border:0;
    }

    .game-section{ padding:20px; transition:filter 0.3s ease; }
    .game-card{
      background-color:#161d16;
      width:85%;
      max-width:1500px;
      margin:20px auto;
      padding:30px;
      display:flex;
      align-items:center;
      gap:20px;
      border-radius:10px;
      transition:filter 0.3s ease;
      cursor:pointer;
    }
    .game-card:hover{ filter:brightness(0.85); }
    .game-card img{ max-width:200px; height:auto; border-radius:10px; }
    .game-info{ flex:1; display:flex; flex-direction:column; }
    .game-title{ font-size:24px; color:#A9FF8E; margin:0 0 10px 0; font-weight:700; }
    .game-platforms{ font-size:12px; color:#A9FF8E; margin:0 0 10px 0; }
    .game-desc{ font-size:14px; color:#eeeeee; margin:0; max-width:900px; }
    .button-container{ align-self:center; margin-left:auto; }

    footer{
      display:flex;
      justify-content:space-around;
      padding:20px;
      background-color:#0E120D;
      color:#eeeeee;
    }
    footer div{ text-align:center; }
    footer h3{ color:#A9FF8E; font-size:16px; margin-bottom:10px; font-weight:700; }
    footer a{ color:#A9FF8E; text-decoration:none; display:block; margin:5px 0; }
    .copyright{
      text-align:center;
      font-size:12px;
      color:#eeeeee;
      background-color:#0E120D;
      padding:10px;
    }

    /* ========= MODAL ========= */
    .modal{
      display:none;
      position:fixed;
      inset:0;
      background-color:rgba(0,0,0,0.82);
      z-index:1000;
      justify-content:center;
      align-items:center;
    }

    .modal-content{
      background-color:#0E120D;
      padding:24px;
      border-radius:14px;

      width:95%;
      max-width:1400px;
      max-height:94vh;
      overflow:auto;

      position:relative;
      text-align:left;
      box-shadow: 0 10px 40px rgba(0,0,0,0.5);
      border: 1px solid rgba(255,255,255,0.06);
    }

    /* Кнопка закрыцця (fixed, заўсёды зверху) */
    .modal-x{
      position: fixed;
      top: calc(10px + env(safe-area-inset-top));
      right: calc(10px + env(safe-area-inset-right));
      width: 40px;
      height: 40px;
      border-radius: 12px;
      border: 1px solid rgba(169,255,142,0.35);
      background: rgba(0,0,0,0.35);
      color: #A9FF8E;
      font-size: 26px;
      line-height: 1;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 2000;
      user-select: none;
    }
    .modal-x:active{ transform: scale(0.98); }

    .modal-top{
      display:flex;
      align-items:flex-start;
      gap:24px;
    }

    .game-img{
      width:clamp(260px, 28vw, 380px);
      height:auto;
      border-radius:14px;
      flex:0 0 auto;
      border: 1px solid rgba(255,255,255,0.08);
      display:block;
    }
    /* па змаўчанні (дэсктоп): паказваем img у modal-top */
    .game-img-mobile{ display:none; }
    .game-img-desktop{ display:block; }


    .modal-side{
      flex:1;
      min-width:320px;
      display:flex;
      flex-direction:column;
    }

    .modal-main-row{
      display:flex;
      gap:22px;
      align-items:flex-start;
      justify-content:space-between;
      width:100%;
      margin:0 0 8px 0;
    }

    .modal-left{
      flex:1 1 auto;
      min-width:280px;
    }

    .modal-title-row{
      display:flex;
      align-items:center;
      justify-content:flex-start;
      gap:12px;
      flex-wrap:wrap;
      margin:0 0 10px 0;
    }

    .modal-title{
      margin:0;
      font-size:28px;
      color:#A9FF8E;
      font-weight:700;
    }

    .modal-icons{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
    }

    .modal-icon{
      width:28px;
      height:28px;
      object-fit:contain;
      display:block;
      border-radius:6px;
      opacity:0.95;
      border: 1px solid rgba(255,255,255,0.10);
      background: rgba(0,0,0,0.15);
    }

    .modal-icon-link{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      width:36px;
      height:36px;
      border-radius:12px;
      border: 1px solid rgba(169,255,142,0.25);
      background: rgba(0,0,0,0.18);
      transition: transform 0.15s ease, filter 0.15s ease, border-color 0.15s ease;
      user-select:none;
      text-decoration:none;
    }
    .modal-icon-link:hover{
      transform: translateY(-1px);
      filter: brightness(1.08);
      border-color: rgba(169,255,142,0.45);
    }

    .modal-actions{
      width:100%;
      max-width:520px;
    }

    .modal-screenshots-title{
      color:#A9FF8E;
      font-size:18px;
      margin:0 0 10px 0;
      font-weight:700;
    }

    .modal-platform-title{
      color:#A9FF8E;
      font-size:16px;
      margin:14px 0 8px 0;
      font-weight:700;
    }

    .modal-download-buttons{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }

    .modal-meta{
      flex:0 0 360px;
      padding:14px;
      border: 1px solid rgba(169,255,142,0.18);
      border-radius:14px;
      background: rgba(255,255,255,0.03);
      margin-top:0;
    }

    .meta-title{
      margin:0 0 12px 0;
      color:#A9FF8E;
      font-weight:700;
      font-size:16px;
    }

    .meta-grid{
      display:flex;
      flex-direction:column;
      gap:10px;
    }

    .meta-badge{
      display:flex;
      align-items: baseline;
      gap:10px;
      padding:10px 12px;
      border-radius:14px;
      border: 1px solid rgba(169,255,142,0.25);
      background: rgba(0,0,0,0.18);
      width:100%;
    }

    .meta-badge .k{
      color:#A9FF8E;
      font-weight:800;
      font-size:11px;
      letter-spacing:0.06em;
      text-transform:uppercase;
      white-space:nowrap;
      opacity:0.95;
      line-height: 1.35;
      flex:0 0 auto;
    }

    .meta-badge .v{
      color:#eeeeee;
      font-weight:700;
      font-size:13px;
      white-space:normal;
      overflow:visible;
      text-overflow:clip;
      max-width:none;
      flex:1 1 auto;
      min-width:0;
      word-break:break-word;
      line-height: 1.35;
    }

    .meta-badge.words .v{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      letter-spacing:0.02em;
    }

    .modal-description{
      margin:10px 0 0 0;
      font-size:16px;
      line-height:1.65;
      color:#eeeeee;
      max-width:1100px;
    }

    .modal-screenshots{ margin-top:28px; }
    .carousel{ position:relative; }

    .modal-screenshot-container{
      display:flex;
      gap:16px;
      overflow-x:auto;
      overflow-y:hidden;
      scroll-behavior:smooth;
      padding:18px 90px;
      -webkit-overflow-scrolling:touch;
      scroll-snap-type:x mandatory;
    }

    .modal-screenshot{
      width:clamp(420px, 48vw, 820px);
      height:420px;
      object-fit:cover;
      border-radius:14px;
      transition:transform 0.25s ease;
      flex:0 0 auto;
      scroll-snap-align:center;
      cursor:pointer;
      user-select:none;
      border: 1px solid rgba(255,255,255,0.08);
    }

    .modal-screenshot.active{ transform:scale(1.08); }

    .prev, .next{
      position:absolute;
      top:50%;
      transform:translateY(-50%);
      background:rgba(0,0,0,0.55);
      color:white;
      border:none;
      padding:12px 14px;
      cursor:pointer;
      z-index:2;
      border-radius:12px;
      user-select:none;
      box-shadow: 0 6px 18px rgba(0,0,0,0.35);
    }
    .prev{ left:10px; }
    .next{ right:10px; }

    .game-section-blur{ filter:blur(5px); }
    body.modal-open{ overflow:hidden; }

    /* ГЛАБАЛЬНА: усё крыху большае */
    html{ font-size:18px; }
    .top-bar{ font-size:1.05rem; }
    .logo{ font-size:2rem; }
    .main-title{ font-size:3rem; }
    .subtitle{ font-size:1rem; }
    .game-title{ font-size:1.5rem; }
    .game-desc{ font-size:1rem; }
    .game-platforms{ font-size:0.85rem; }
    .game-button{ font-size:0.95rem; padding:10px 18px; }
    .modal-title{ font-size:1.75rem; }
    .modal-screenshots-title{ font-size:1.15rem; }
    .modal-platform-title{ font-size:1.05rem; }
    .modal-description{ font-size:1.05rem; }
    .meta-title{ font-size:1.05rem; }
    .meta-badge .k{ font-size:0.72rem; }
    .meta-badge .v{ font-size:0.95rem; }

    /* ===== MOBILE ===== */
    @media (max-width: 980px){
      /* header: current project first */

      .game-img-mobile{ display:block; }
      .game-img-desktop{ display:none; }
      
      .header-alignment{
        flex-direction: column;
        align-items: stretch;
        width: 92%;
        padding: 18px;
        margin: 10px auto;
        gap: 14px;
      }
      .header-right{ order: 1; margin: 0; text-align: left; }
      .header-left{ order: 2; }
      .header-right .game-name{ text-align: left; }

      .top-bar{
        padding: 14px;
        margin-right: 0;
      }
      .logo{ margin-left: 14px; }

      /* cards */
      .game-card{
        width: 92%;
        padding: 16px;
        gap: 14px;
        flex-direction: column;
        align-items: flex-start;
      }
      .game-card img{
        width: 100%;
        max-width: 520px;
      }
      .button-container{
        margin-left: 0;
        align-self: flex-start;
      }

      /* modal full screen */
      .modal{
        padding: 0;
        align-items: stretch;
      }

      .modal-content{
        width: 100%;
        max-width: 100%;
        max-height: 100vh;
        border-radius: 0;
        padding: 0;              /* каб вокладка была full-width */
        overflow-x: hidden;
      }

      /* ДАЕ ВОДСТУП ДА КАНТЭНТУ (больш, чым раней) */
      .modal-inner{
        padding:
          calc(22px + env(safe-area-inset-top))
          calc(20px + env(safe-area-inset-right))
          calc(26px + env(safe-area-inset-bottom))
          calc(20px + env(safe-area-inset-left));
      }

      /* вокладка full-width */
      .game-img{
        width: 100%;
        max-width: 100%;
        margin: 0;
        border-radius: 0;
      }

      .modal-top{
        display:block;
      }

      .modal-main-row{
        flex-direction: column;
        gap: 14px;
        align-items: stretch;
      }

      .modal-title{ font-size: 1.45rem; }

      .modal-meta{
        width: 100%;
        flex: unset;
      }

      .modal-actions{
        max-width: none;
        width: 100%;
      }

      .modal-screenshot-container{
        padding: 12px 56px;
        gap: 12px;
      }

      .modal-screenshot{
        width: 86vw;
        max-width: 560px;
        height: 260px;
      }
    }
  </style>
</head>

<body>
  <div class="top-bar">
    <div class="logo">łokar</div>
    <nav>
      <a href="https://www.patreon.com/c/lokar_lak" target="_blank" rel="noopener noreferrer">падтрымаць</a>
    </nav>
  </div>

  <div class="header-container">
    <div class="header-alignment">
      <div class="header-left">
        <h1 class="main-title">Пра нас</h1>
        <p class="subtitle">
          Мы — каманда лакізатараў-энтузіастаў і проста аматараў якасных кампутарных гульняў.
          Мы робім гульні больш даступнымі, і даём адчуць самы смак беларускай у вашых улюбленых праектах.
        </p>
      </div>

      <div class="header-right">
        <span>Бягучы праект</span>
        <div class="game-name">Don't Starve Together</div>
        <a href="https://forms.gle/NWaErzdBpwZfXLNM6" target="_blank" rel="noopener noreferrer" class="game-button">Далучыцца</a>
      </div>
    </div>
  </div>

  <div class="game-section" id="game-list"></div>

  <footer>
    <div>
      <h3>падтрымаць нас</h3>
      <a href="https://www.patreon.com/c/lokar_lak" target="_blank" rel="noopener noreferrer">Patreon</a>
      <a href="https://boosty.to/lokar_lak" target="_blank" rel="noopener noreferrer">Boosty</a>
    </div>
    <div>
      <h3>далучыцца</h3>
      <a href="https://forms.gle/NWaErzdBpwZfXLNM6" target="_blank" rel="noopener noreferrer">Google Forms</a>
    </div>
    <div>
      <h3>нашы сацсеткі</h3>
      <a href="https://x.com/lokar_lak" target="_blank" rel="noopener noreferrer">Twitter</a>
      <a href="https://t.me/lokar_lak" target="_blank" rel="noopener noreferrer">Telegram</a>
      <a href="https://discord.com/invite/wCPEK5kFUj" target="_blank" rel="noopener noreferrer">Discord</a>
    </div>
  </footer>

  <p class="copyright">© 2025 - łokar</p>

  <!-- MODAL -->
  <div id="modal" class="modal" aria-hidden="true">
   <div class="modal-content">
  <button class="modal-x" type="button" aria-label="Закрыць" onclick="closeModal()">×</button>

  <!-- MOBILE cover (full-width) -->
  <img id="modal-image-mobile" class="game-img game-img-mobile" src="" alt="Game Image">

  <div class="modal-inner">
    <div class="modal-top">
      <!-- DESKTOP cover (як раней, у адной вертыкальнай зоне з загалоўкам) -->
      <img id="modal-image" class="game-img game-img-desktop" src="" alt="Game Image">

      <div class="modal-side">
            <div class="modal-main-row">
              <div class="modal-left">
                <div class="modal-title-row">
                  <h2 id="modal-title" class="modal-title"></h2>
                  <div id="modal-icons" class="modal-icons" aria-label="Значкі крам і платформ"></div>
                </div>

                <div class="modal-actions">
                  <div id="modal-platforms" class="modal-platforms">
                    <h3 class="modal-screenshots-title">Файлы для спампоўвання</h3>
                  </div>
                </div>
              </div>

              <div class="modal-meta">
                <div class="meta-title">Інфармацыя</div>
                <div id="meta-grid" class="meta-grid"></div>
              </div>
            </div>
          </div>
        </div>

        <h3 class="modal-screenshots-title" style="margin-top:18px;">Апісанне</h3>
        <p id="modal-description" class="modal-description"></p>

        <div id="modal-screenshots" class="modal-screenshots">
          <h3 class="modal-screenshots-title">Скрыншоты</h3>
          <div class="carousel">
            <button type="button" class="prev" onclick="scrollCarousel(-1)" aria-label="Папярэдні скрыншот">&lt;</button>
            <div id="screenshot-container" class="modal-screenshot-container"></div>
            <button type="button" class="next" onclick="scrollCarousel(1)" aria-label="Наступны скрыншот">&gt;</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const GAMES = [
      {
        id: "stardew",
        pageUrl: "games/stardew-valley.html",
        title: "Stardew Valley",
        cover: "images/stardewValley_img.png",
        cardPlatforms: "pc · android · клясычны і афіцыйны правапісы",
        cardDescription: "Вы сталі спадкаемцам старой дзялянкі вашага дзеда ў даліне Стардзю. Узброіўшыся базавымі інструментамі і парай манет у кішэні, вы пачынаеце новае жыццё. Ці навучыцеся вы жыць з зямлі-карміліцы і ці стануць гэтыя зарослыя палі вашым новым квітучым домам?",
        description: "Вы сталі спадкаемцам старой дзялянкі вашага дзеда ў даліне Стардзю. Узброіўшыся базавымі інструментамі і парай манет у кішэні, вы пачынаеце новае жыццё. Ці навучыцеся вы жыць з зямлі-карміліцы і ці стануць гэтыя зарослыя палі вашым новым квітучым домам?",
        downloads: [
          { platform: "PC версія", links: [
            { text: "Nexus", url: "https://www.nexusmods.com/stardewvalley/mods/27171?tab=files" },
            { text: "Mega", url: "https://mega.nz/folder/C2higIIC#iAwKE4OBRBG7QQlGLjmKyg" },
            { text: "CurseForge", url: "https://www.curseforge.com/stardewvalley/mods/bielarusizatar-stardew-valley-belarusian" }
          ]},
          { platform: "Android версія", links: [
            { text: "Nexus", url: "https://www.nexusmods.com/stardewvalley/mods/27171?tab=files" },
            { text: "Mega", url: "https://mega.nz/folder/LuwHVQyB#GOsLjoFvrYdbW-slKhz11w" }
          ]}
        ],
        screenshots: [
          "images/stardew/27171-1724275394-18024899.webp",
          "images/stardew/27171-1725316923-1440891159.webp",
          "images/stardew/27171-1734469877-305258919.webp",
          "images/stardew/27171-1731440227-215258228.webp",
          "images/stardew/27171-1731440220-1343818195.webp",
          "images/stardew/27171-1724275398-1615238029.webp",
          "images/stardew/27171-1724275400-1209489487.webp",
          "images/stardew/27171-1724275394-1348653713.webp",
          "images/stardew/27171-1732560547-1826579576.webp",
          "images/stardew/27171-1732560547-1540111734.webp"
        ],
        icons: [
          { alt: "Steam", img: "images/icons/steam-svgrepo-com.svg", url: "https://store.steampowered.com/app/413150/Stardew_Valley/" },
          { alt: "GOG", img: "images/icons/gog_galaxy_alt_macos_bigsur_icon_190150-1908176498.png", url: "https://www.gog.com/game/stardew_valley" },
          { alt: "Google Play", img: "images/icons/google-play-icon-svgrepo-com.svg", url: "https://play.google.com/store/apps/details?id=com.chucklefish.stardewvalley&hl=pl&pli=1"},
          { alt: "Xbox", img: "images/icons/xbox-svgrepo-com.svg", url :"https://www.xbox.com/pl-pl/games/store/stardew-valley/c3d891z6tnqm"}
        ],
        meta: { developer: "ConcernedApe", genre: "Сімулятар / РПГ / Фэнтэзі", translators: "Ueschar, Dymniška, Cactusovič", words: "~178.000" }
      },

      {
        id: "mouthwashing",
        pageUrl: "games/mouthwashing.html",
        title: "Mouthwashing",
        cover: "images/mouthwashing_img.png",
        cardPlatforms: "pc · афіцыйны правапіс",
        cardDescription: "Экіпаж з пяцярых асоб на караблі «Тульпар» захрас у пустэльных прасторах космасу, ахутаны бясконцым змрокам.<br><br>І бог іх не пільнуе.",
        description: "Экіпаж з пяцярых асоб на караблі «Тульпар» захрас у пустэльных прасторах космасу, ахутаны бясконцым змрокам.<br><br>І бог іх не пільнуе.",
        downloads: [
          { platform: "PC версія", links: [
            { text: "Nexus", url: "https://www.nexusmods.com/mouthwashing/mods/5/" },
            { text: "Mega", url: "https://mega.nz/file/BQhTzJ4Q#HvuVLT-vzT8r38vFKT8pzwl0-MO7DjDDu_zFi5U9JY0" }
          ]}
        ],
        screenshots: [
          "images/mouthwashing/5-1738857539-1821796376.webp",
          "images/mouthwashing/5-1738857552-1271356023.webp",
          "images/mouthwashing/5-1738857561-1707518091.webp",
          "images/mouthwashing/5-1738857571-1831959246.webp",
          "images/mouthwashing/5-1738857592-519947450.webp",
          "images/mouthwashing/5-1738857656-1426923202.webp",
          "images/mouthwashing/5-1738857665-170199798.webp"
        ],
        icons: [
          { alt: "Steam", img: "images/icons/steam-svgrepo-com.svg", url: "https://store.steampowered.com/app/2475490/Mouthwashing/"}
        ],
        meta: { developer: "Wrong Organ", genre: "Вар’яцтва / Жахі", translators: "Dymniška, Ueschar", words: "~6.000" }
      },

      {
        id: "homm3",
        pageUrl: "games/homm3.html",
        title: "Heroes of Might & Magic 3",
        cover: "images/HOMM3_img.png",
        cardPlatforms: "pc · афіцыйны правапіс",
        cardDescription: "Самая папулярная гульня серыі герояў усіх часоў! Адкрыйце для сябе эпічную гісторыю каралевы Кацярыны Жалезны Кулак, якая распачынае свой выўваляльны паход, каб аб’яднаць спустошаную радзіму і зноў адваяваць каралеўства Эрафію.",
        description: "Самая папулярная гульня серыі герояў усіх часоў! Адкрыйце для сябе эпічную гісторыю каралевы Кацярыны Жалезны Кулак, якая распачынае свой выўваляльны паход, каб аб’яднаць спустошаную радзіму і зноў адваяваць каралеўства Эрафію.",
        downloads: [
          { platform: "PC версія", links: [
            { text: "Сайт", url: "https://heroes.by-reservation.com/spampavac/" }
          ]}
        ],
        screenshots: [
          "images/homm3/homm3-20250318-1.jpg",
          "images/homm3/homm3-20250318-2.jpg",
          "images/homm3/homm3-20250318-3.jpg",
          "images/homm3/homm3-20250318-4.jpg",
          "images/homm3/homm3-20250318-5.jpg",
          "images/homm3/homm3-20250318-6.jpg"
        ],
        icons: [
          { alt: "GOG", img: "images/icons/gog_galaxy_alt_macos_bigsur_icon_190150-1908176498.png", url: "https://www.gog.com/pl/game/heroes_of_might_and_magic_3_complete_edition"},
          { alt: "Ubisoft store", img: "images/icons/uplay-svgrepo-com.svg", url: "https://store.ubisoft.com/eu/heroes-of-might-and-magic-iii--complete/575ffd9ba3be1633568b4d8c.html"}
        ],
        meta: { developer: "New World Computing", genre: "Пакрокавая стратэгія", translators: "Аляксандр Шумскі, Аляксандр Міхалеў, Vasil Pupkin", words: "~130.000" }
      },

      {
        id: "valheim",
        pageUrl: "games/valheim.html",
        title: "Valheim",
        cover: "images/valheim_img.png",
        cardPlatforms: "pc · афіцыйны правапіс",
        cardDescription: "Жорсткая гульня пра даследаванне і выжыванне для 1–10 гульцоў, дзеянне якой адбываецца ў працэдурна згенераваным чыстцы, натхнёным культурай вікінгаў. Змагайся, будуй і заваёўвай — пракладай сабе шлях да сагі, годнай апекі Одына!",
        description: "Жорсткая гульня пра даследаванне і выжыванне для 1–10 гульцоў, дзеянне якой адбываецца ў працэдурна згенераваным чыстцы, натхнёным культурай вікінгаў. Змагайся, будуй і заваёўвай — пракладай сабе шлях да сагі, годнай апекі Одына!",
        downloads: [
          { platform: "PC версія", links: [
            { text: "Nexus", url: "https://www.nexusmods.com/valheim/mods/3055" },
            { text: "Thunderstore", url: "https://thunderstore.io/c/valheim/p/lokar/Bielarusizatar_Valheim_Belarusian_Translation/" },
            { text: "Mega", url: "https://mega.nz/folder/GiBBTIRa#9gtGmuapCbm4S_IwucE4XQ" }
          ]}
        ],
        screenshots: [
          "images/valheim/3055-1747002614-114613899.webp",
          "images/valheim/3055-1747002677-635592845.webp",
          "images/valheim/3055-1747002678-1503626493.webp",
          "images/valheim/3055-1747002682-2019291598.webp",
          "images/valheim/3055-1747003001-1815005726.webp"
        ],
        icons: [
          { alt: "Steam", img: "images/icons/steam-svgrepo-com.svg", url: "https://store.steampowered.com/app/892970/Valheim/" },
          { alt: "Xbox", img: "images/icons/xbox-svgrepo-com.svg", url: "https://www.xbox.com/pl-pl/games/store/valheim-wyprobuj-gre/9ncbl78cg9n7"}
        ],
        meta: { developer: "Iron Gate Studio", genre: "Survival / Open World", translators: "Ueschar, Dymniška, Данік. Kastuś", words: "~30.000" }
      }
    ];

    const gameList = document.getElementById('game-list');

    function createGameCard(game) {
      const card = document.createElement('div');
      card.className = 'game-card';
      card.addEventListener('click', () => openGameModal(game));

      const img = document.createElement('img');
      img.src = game.cover;
      img.alt = game.title;

      const info = document.createElement('div');
      info.className = 'game-info';

      const h2 = document.createElement('h2');
      h2.className = 'game-title';
      h2.textContent = game.title;

      const platforms = document.createElement('div');
      platforms.className = 'game-platforms';
      platforms.textContent = game.cardPlatforms || '';

      const desc = document.createElement('p');
      desc.className = 'game-desc';
      desc.innerHTML = game.cardDescription || '';

      info.appendChild(h2);
      info.appendChild(platforms);
      info.appendChild(desc);

      const btnWrap = document.createElement('div');
      btnWrap.className = 'button-container';

      const btn = document.createElement('a');
      btn.href = '#';
      btn.className = 'game-button';
      btn.textContent = 'Падрабязней';
      btn.addEventListener('click', (e) => e.preventDefault());

      btnWrap.appendChild(btn);

      card.appendChild(img);
      card.appendChild(info);
      card.appendChild(btnWrap);

      return card;
    }

    function renderGameList() {
      gameList.innerHTML = '';
      GAMES.forEach(g => gameList.appendChild(createGameCard(g)));
    }
    renderGameList();

    let debounceTimer;

    const modal = document.getElementById('modal');
    const modalTitle = document.getElementById('modal-title');
    const modalImage = document.getElementById('modal-image');
    const modalDescription = document.getElementById('modal-description');
    const modalPlatforms = document.getElementById('modal-platforms');
    const modalScreenshots = document.getElementById('modal-screenshots');
    const screenshotContainer = document.getElementById('screenshot-container');
    const iconsContainer = document.getElementById('modal-icons');
    const metaGrid = document.getElementById('meta-grid');
    const body = document.body;

    // close on backdrop
    modal.addEventListener('click', (e) => {
      if (e.target === modal) closeModal();
    });

    // Esc + arrows
    document.addEventListener('keydown', (e) => {
      if (modal.style.display !== 'flex') return;
      if (e.key === 'Escape') closeModal();
      if (e.key === 'ArrowLeft') scrollCarousel(-1);
      if (e.key === 'ArrowRight') scrollCarousel(1);
    });

    // scroll listener for active screenshot
    screenshotContainer.addEventListener('scroll', () => {
      clearTimeout(debounceTimer);
      debounceTimer = setTimeout(updateActiveScreenshot, 80);
    }, { passive: true });

    function closeModal() {
      modal.style.display = 'none';
      modal.setAttribute('aria-hidden', 'true');
      body.classList.remove('modal-open');
      document.querySelector('.game-section')?.classList.remove('game-section-blur');
    }

    function openGameModal(game) {
      modalPlatforms.innerHTML = '<h3 class="modal-screenshots-title">Файлы для спампоўвання</h3>';
      screenshotContainer.innerHTML = '';
      metaGrid.innerHTML = '';
      iconsContainer.innerHTML = '';

      modalTitle.textContent = game.title;
      modalImage.src = game.cover;
      const modalImageMobile = document.getElementById('modal-image-mobile');
      if (modalImageMobile) modalImageMobile.src = game.cover;
      modalDescription.innerHTML = game.description || '';

      renderIcons(game.icons || []);
      renderMetaBadges(game.meta || {});
      renderDownloads(game.downloads || []);
      renderScreenshots(game.screenshots || []);

      modal.style.display = 'flex';
      modal.setAttribute('aria-hidden', 'false');
      body.classList.add('modal-open');
      document.querySelector('.game-section')?.classList.add('game-section-blur');
    }

    function renderIcons(icons) {
      iconsContainer.innerHTML = '';
      if (!icons.length) return;

      icons.forEach(ic => {
        const img = document.createElement('img');
        img.className = 'modal-icon';
        img.src = ic.img;
        img.alt = ic.alt || 'icon';

        if (ic.url) {
          const a = document.createElement('a');
          a.className = 'modal-icon-link';
          a.href = ic.url;
          a.target = '_blank';
          a.rel = 'noopener noreferrer';
          a.title = ic.alt || '';
          a.appendChild(img);
          iconsContainer.appendChild(a);
        } else {
          const span = document.createElement('span');
          span.className = 'modal-icon-link';
          span.title = ic.alt || '';
          span.style.cursor = 'default';
          span.appendChild(img);
          iconsContainer.appendChild(span);
        }
      });
    }

    function renderMetaBadges(meta) {
      const items = [
        { key: 'Распрацоўшчык:', value: meta.developer ?? '—' },
        { key: 'Жанр:', value: meta.genre ?? '—' },
        { key: 'Аўтары:', value: meta.translators ?? '—' },
        { key: 'Колькасць слоў:', value: meta.words ?? '—', cls: 'words' },
      ];

      items.forEach(item => {
        const badge = document.createElement('div');
        badge.className = 'meta-badge' + (item.cls ? (' ' + item.cls) : '');

        const k = document.createElement('span');
        k.className = 'k';
        k.textContent = item.key;

        const v = document.createElement('span');
        v.className = 'v';
        v.textContent = String(item.value);

        badge.appendChild(k);
        badge.appendChild(v);
        metaGrid.appendChild(badge);
      });
    }

    function renderDownloads(downloads) {
      downloads.forEach(platform => {
        const platformDiv = document.createElement('div');

        const platformTitle = document.createElement('div');
        platformTitle.classList.add('modal-platform-title');
        platformTitle.textContent = platform.platform;
        platformDiv.appendChild(platformTitle);

        const buttonsDiv = document.createElement('div');
        buttonsDiv.classList.add('modal-download-buttons');

        (platform.links || []).forEach(link => {
          const a = document.createElement('a');
          a.href = link.url;
          a.classList.add('game-button');
          a.textContent = link.text;
          a.target = "_blank";
          a.rel = "noopener noreferrer";
          buttonsDiv.appendChild(a);
        });

        platformDiv.appendChild(buttonsDiv);
        modalPlatforms.appendChild(platformDiv);
      });
    }

    function renderScreenshots(screenshots) {
      if (!screenshots.length) {
        modalScreenshots.style.display = 'none';
        return;
      }
      modalScreenshots.style.display = 'block';

      screenshots.forEach(src => {
        const img = document.createElement('img');
        img.src = src;
        img.classList.add('modal-screenshot');
        img.alt = 'Screenshot';

        img.addEventListener('click', () => centerOnImage(img, true));
        screenshotContainer.appendChild(img);
      });

      requestAnimationFrame(() => {
        const imgs = getImages();
        const mid = Math.floor(imgs.length / 2);
        centerOnIndex(mid, false);
        updateActiveScreenshot();
      });
    }

    function getImages() {
      return Array.from(screenshotContainer.querySelectorAll('.modal-screenshot'));
    }

    function clamp(n, min, max) {
      return Math.max(min, Math.min(max, n));
    }

    function setActive(img) {
      getImages().forEach(i => i.classList.remove('active'));
      if (img) img.classList.add('active');
    }

    function centerOnImage(img, smooth = true) {
      if (!img) return;

      const targetLeft =
        img.offsetLeft + (img.clientWidth / 2) - (screenshotContainer.clientWidth / 2);

      screenshotContainer.scrollTo({
        left: Math.max(0, targetLeft),
        behavior: smooth ? 'smooth' : 'auto'
      });

      setActive(img);
    }

    function centerOnIndex(index, smooth = true) {
      const imgs = getImages();
      const img = imgs[index];
      if (!img) return;
      centerOnImage(img, smooth);
    }

    function getClosestToCenter() {
      const imgs = getImages();
      if (!imgs.length) return { img: null, index: -1 };

      const center = screenshotContainer.scrollLeft + screenshotContainer.clientWidth / 2;

      let bestIdx = 0;
      let bestDiff = Infinity;

      imgs.forEach((img, idx) => {
        const imgCenter = img.offsetLeft + img.clientWidth / 2;
        const diff = Math.abs(center - imgCenter);
        if (diff < bestDiff) {
          bestDiff = diff;
          bestIdx = idx;
        }
      });

      return { img: imgs[bestIdx], index: bestIdx };
    }

    function scrollCarousel(dir) {
      const imgs = getImages();
      if (!imgs.length) return;

      const { index } = getClosestToCenter();
      const nextIndex = clamp(index + dir, 0, imgs.length - 1);
      centerOnIndex(nextIndex, true);
    }

    function updateActiveScreenshot() {
      const { img } = getClosestToCenter();
      setActive(img);
    }
  </script>
</body>
</html>
